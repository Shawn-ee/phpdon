webpackJsonp([5],{"5PlU":function(e,t,r){var a=r("RY/4"),n=r("dSzd")("iterator"),o=r("/bQp");e.exports=r("FeBl").isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||o.hasOwnProperty(a(t))}},BO1k:function(e,t,r){e.exports={default:r("fxRn"),__esModule:!0}},Xd32:function(e,t,r){r("+tPU"),r("zQR9"),e.exports=r("5PlU")},d7EF:function(e,t,r){"use strict";t.__esModule=!0;var a=o(r("us/S")),n=o(r("BO1k"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,a.default)(Object(e)))return function(e,t){var r=[],a=!0,o=!1,i=void 0;try{for(var p,s=(0,n.default)(e);!(a=(p=s.next()).done)&&(r.push(p.value),!t||r.length!==t);a=!0);}catch(e){o=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},eB79:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("mvHQ"),n=r.n(a),o=r("Gu7T"),i=r.n(o),p=r("Xxa5"),s=r.n(p),l=r("woOf"),u=r.n(l),c=r("//Fk"),d=r.n(c),_=r("d7EF"),m=r.n(_),f=r("exGp"),b=r.n(f),v={data:function(){return{link:"",arr:["app_app_id","app_app_secret"],arr1:["app_download_img","android_link","ios_link"],subForm:{app_app_id:"",app_app_secret:"",app_download_img:[],android_link:"",ios_link:""},subFormRules:{app_app_id:{required:!0,type:"string",message:"请输入微信开放平台移动应用AppID",trigger:"blur"},app_app_secret:{required:!0,type:"string",message:"请输入微信开放平台移动应用AppSecret",trigger:"blur"}}}},created:function(){var e=window.location.href.split("/#")[0];this.link=e+"/h5/?#/user/pages/app-download",this.getFormInfo()},methods:{getFormInfo:function(){var e=this;return b()(s.a.mark(function t(){var r,a,n,o,i,p,l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.all([e.$api.system.configInfo(),e.$api.system.configInfoSchedule()]);case 2:r=t.sent,a=m()(r,2),n=a[0],o=a[1],i=e.$util.pick(n.data,e.arr),p=e.$util.pick(o.data,e.arr1),(l=u()({},i,p)).app_download_img=l.app_download_img&&l.app_download_img.length>0?[{url:l.app_download_img}]:[],e.subForm=l;case 11:case"end":return t.stop()}},t,e)}))()},getCover:function(e,t){this.subForm[t]=e},selectedFiles:function(e,t){var r;(r=this.subForm[t]).push.apply(r,i()(e))},moveFiles:function(e,t){this.subForm[t]=e},submitForm:function(){var e=this;return b()(s.a.mark(function t(){var r,a,o,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!1,e.$refs.subForm.validate(function(e){e&&(r=!0)}),(a=JSON.parse(n()(e.subForm))).app_download_img=a.app_download_img&&a.app_download_img.length>0?a.app_download_img[0].url:"",o=e.$util.pick(a,e.arr),!(i=e.$util.pick(a,e.arr1)).android_link&&!i.ios_link||i.app_download_img){t.next=9;break}return e.$message.error("请上传APP下载引导图"),t.abrupt("return");case 9:if(!r){t.next=13;break}return t.next=12,d.a.all([e.$api.system.configUpdate(o),e.$api.system.configUpdateSchedule(i)]);case 12:e.$message.success(e.$t("tips.successSub"));case 13:case"end":return t.stop()}},t,e)}))()}}},g={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lb-system-wechat"},[r("top-nav"),e._v(" "),r("div",{staticClass:"page-main"},[r("lb-tips",[e._v(" APP下载页面链接："+e._s(e.link)+" ")]),e._v(" "),r("el-form",{ref:"subForm",staticClass:"config-form",attrs:{model:e.subForm,rules:e.subFormRules,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"AppID",prop:"app_app_id"}},[r("el-input",{attrs:{placeholder:"请输入微信开放平台移动应用AppID"},model:{value:e.subForm.app_app_id,callback:function(t){e.$set(e.subForm,"app_app_id",t)},expression:"subForm.app_app_id"}}),e._v(" "),r("lb-tool-tips",[e._v("请输入微信开放平台申请移动应用的AppID，输入错误会影响APP的正常使用，谨慎修改")])],1),e._v(" "),r("el-form-item",{attrs:{label:"AppSecret",prop:"app_app_secret"}},[r("el-input",{attrs:{placeholder:"请输入微信开放平台移动应用AppSecret"},model:{value:e.subForm.app_app_secret,callback:function(t){e.$set(e.subForm,"app_app_secret",t)},expression:"subForm.app_app_secret"}}),e._v(" "),r("lb-tool-tips",[e._v("请输入微信开放平台申请移动应用的AppSecret，输入错误会影响APP的正常使用，谨慎修改")])],1),e._v(" "),r("el-form-item",{attrs:{label:"APP下载引导图",prop:"app_download_img"}},[r("lb-cover",{attrs:{fileList:e.subForm.app_download_img},on:{selectedFiles:function(t){return e.getCover(t,"app_download_img")}}}),e._v(" "),r("lb-tool-tips",[e._v("图片建议尺寸：1198 * 2320，图片内容建议居中展示\n        ")])],1),e._v(" "),r("el-form-item",{attrs:{label:"Android下载链接",prop:"android_link"}},[r("el-input",{attrs:{placeholder:"请输入Android下载链接"},model:{value:e.subForm.android_link,callback:function(t){e.$set(e.subForm,"android_link",t)},expression:"subForm.android_link"}}),e._v(" "),r("lb-tool-tips",[e._v("建议将安卓包上传至云存储 ")])],1),e._v(" "),r("el-form-item",{attrs:{label:"IOS下载链接",prop:"ios_link"}},[r("el-input",{attrs:{placeholder:"请输入IOS下载链接"},model:{value:e.subForm.ios_link,callback:function(t){e.$set(e.subForm,"ios_link",t)},expression:"subForm.ios_link"}}),e._v(" "),r("lb-tool-tips",[e._v("例如：https://apps.apple.com/cn/app/具体ID值，可通过AppStore分享应用链接查看")])],1),e._v(" "),r("el-form-item",[r("lb-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(e._s(e.$t("action.submit")))])],1)],1)],1)],1)},staticRenderFns:[]};var F=r("VU/8")(v,g,!1,function(e){r("mcwV")},"data-v-7e405ffb",null);t.default=F.exports},fxRn:function(e,t,r){r("+tPU"),r("zQR9"),e.exports=r("g8Ux")},g8Ux:function(e,t,r){var a=r("77Pl"),n=r("3fs2");e.exports=r("FeBl").getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},mcwV:function(e,t){},"us/S":function(e,t,r){e.exports={default:r("Xd32"),__esModule:!0}}});