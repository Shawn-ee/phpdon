webpackJsonp([52],{"258+":function(e,t){},kRP5:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("mvHQ"),i=r.n(s),u=r("Xxa5"),a=r.n(u),n=r("exGp"),o=r.n(n),l={data:function(){return{navTitle:"",printList:[{id:1,title:"飞鹅打印"}],checkNum:[],numList:[{title:"用户小票",key:"user_ticket",number:"user_ticket_num",tips:"接单后打印小票"},{title:"后厨小票",key:"kitchen_ticket",number:"kitchen_ticket_num",tips:"正餐接单、快餐下单、外卖接单后打印小票"}],printNumList:[1,2,3,4,5],subForm:{store_id:0,title:"",type:1,user:"",code:"",api_key:"",printer_key:"",auto:!1,user_ticket:0,user_ticket_num:1,kitchen_ticket:0,kitchen_ticket_num:1},subFormRules:{title:{required:!0,validator:this.$reg.isNotNull,text:"打印机名称",reg_type:2,trigger:"blur"},type:{required:!0},auto:{required:!0}},bFormRules:{user:{required:!0,type:"string",message:"请输入飞鹅云后台注册用户名",trigger:"blur"},api_key:{required:!0,type:"string",message:"请输入飞鹅云注册账号后生成的UKEY",trigger:"blur"},printer_key:{required:!0,type:"string",message:"请输入打印机编号",trigger:"blur"}}}},created:function(){this.getDetail()},methods:{changeCheckBox:function(e,t,r){var s=this;"subForm"===t?this[t][r]=e:this[t].map(function(t){s.subForm[t.key]=e.includes(t.title)?1:0})},getDetail:function(){var e=this;return o()(a.a.mark(function t(){var r,s,i,u,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.system.printerInfo();case 2:if(r=t.sent,s=r.code,i=r.data,200===s){t.next=7;break}return t.abrupt("return");case 7:for(u in i.auto=1===i.auto,["api_key","code","user","printer_key"].map(function(e){"0"===i[e]&&(i[e]="")}),e.subForm)e.subForm[u]=i[u];n=[],e.numList.map(function(e){1===i[e.key]&&n.push(e.title)}),e.checkNum=n;case 14:case"end":return t.stop()}},t,e)}))()},submitFormInfo:function(){var e=this;return o()(a.a.mark(function t(){var r,s,u,n,o,l;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r=JSON.parse(i()(e.subForm)),s=["aForm"],1===r.type&&s.push("bForm"),u=!0,n=0,o=s.length;n<o;n++)e.$refs[s[n]].validate(function(e){if(!e)return u=!1,!1});if(!u){t.next=14;break}return r.auto=!0===r.auto?1:0,t.next=9,e.$api.system.printerUpdate(r);case 9:if(l=t.sent,200===l.code){t.next=13;break}return t.abrupt("return");case 13:e.$message.success(e.$t("tips.successSub"));case 14:case"end":return t.stop()}},t,e)}))()}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lb-ordering-editPrint"},[r("top-nav"),e._v(" "),r("div",{staticClass:"page-main"},[r("el-form",{ref:"aForm",staticClass:"basic-form",attrs:{model:e.subForm,rules:e.subFormRules,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"打印机名称",prop:"title"}},[r("el-input",{attrs:{maxlength:"40",placeholder:"请输入打印机名称"},model:{value:e.subForm.title,callback:function(t){e.$set(e.subForm,"title",t)},expression:"subForm.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"选择打印机",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择打印机"},model:{value:e.subForm.type,callback:function(t){e.$set(e.subForm,"type",t)},expression:"subForm.type"}},e._l(e.printList,function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1),e._v(" "),1===e.subForm.type?r("el-form",{ref:"bForm",staticClass:"basic-form",attrs:{model:e.subForm,rules:e.bFormRules,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"USER",prop:"user"}},[r("el-input",{attrs:{placeholder:"请输入飞鹅云后台注册用户名"},model:{value:e.subForm.user,callback:function(t){e.$set(e.subForm,"user",t)},expression:"subForm.user"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"UKEY",prop:"api_key"}},[r("el-input",{attrs:{placeholder:"请输入飞鹅云注册账号后生成的UKEY"},model:{value:e.subForm.api_key,callback:function(t){e.$set(e.subForm,"api_key",t)},expression:"subForm.api_key"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"SN",prop:"printer_key"}},[r("el-input",{attrs:{placeholder:"请输入打印机编号"},model:{value:e.subForm.printer_key,callback:function(t){e.$set(e.subForm,"printer_key",t)},expression:"subForm.printer_key"}})],1)],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"自动打印",prop:"auto"}},[r("el-switch",{model:{value:e.subForm.auto,callback:function(t){e.$set(e.subForm,"auto",t)},expression:"subForm.auto"}})],1),e._v(" "),r("el-form-item",[r("lb-button",{attrs:{type:"primary"},on:{click:e.submitFormInfo}},[e._v(e._s(e.$t("action.submit")))])],1)],1)],1)],1)},staticRenderFns:[]};var m=r("VU/8")(l,c,!1,function(e){r("258+")},"data-v-65b511e6",null);t.default=m.exports}});